(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60f09f57"],{"1c7fc":function(t,s,e){},"4c3d":function(t,s,e){"use strict";e("1c7fc")},"6e6e":function(t,s,e){"use strict";e.r(s);var r=function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("div",{attrs:{id:"userDetail-container"}},[t.isSpin?r("div",{staticClass:"example"},[r("a-spin",{attrs:{tip:"努力加载中...",size:"large"}})],1):r("div",[r("div",{staticClass:"top_content"},[r("div",{staticClass:"avatar"},[r("img",{attrs:{src:t.userInfo.profile.avatarUrl,alt:""}})]),r("div",{staticClass:"content_r"},[r("div",{staticClass:"r_header"},[r("h2",{staticClass:"title"},[t._v(t._s(t.userInfo.profile.nickname))]),r("div",{staticClass:"r_header_b"},[r("div",[11===t.userInfo.profile.vipType?r("span",{staticClass:"vip"},[t._v("VIP")]):t._e(),r("span",{staticClass:"level"},[t._v("Lv."+t._s(t.userInfo.level))]),r("span",[1===t.userInfo.profile.gender?r("a-icon",{staticStyle:{"background-color":"#B0E2FF",padding:"3px","border-radius":"50%"},attrs:{type:"man"}}):r("a-icon",{staticStyle:{"background-color":"#EED2EE",padding:"3px","border-radius":"50%"},attrs:{type:"woman"}})],1)]),r("div",[t.userId===Number(t.$route.query.userId)?r("a-button",[r("a-icon",{attrs:{type:"edit"}}),t._v(" 编辑个人信息 ")],1):t._e(),t.userId!==Number(t.$route.query.userId)?r("a-button",{staticStyle:{"margin-right":"20px"},on:{click:function(s){return t.directMessage(t.userInfo.profile)}}},[r("a-icon",{attrs:{type:"mail"}}),t._v(" 私信 ")],1):t._e(),t.userId!==Number(t.$route.query.userId)&&!0===t.isFollowed?r("a-button",{attrs:{type:"primary"},on:{click:function(s){return t.followUser(0,t.$route.query.userId)}}},[t._v(" 已关注 ")]):t._e(),t.userId!==Number(t.$route.query.userId)&&!1===t.isFollowed?r("a-button",{on:{click:function(s){return t.followUser(1,t.$route.query.userId)}}},[r("a-icon",{attrs:{type:"plus"}}),t._v(" 关注 ")],1):t._e()],1)])]),r("div",{staticClass:"r_content"},[r("div",{staticClass:"content_list",on:{click:function(s){return t.toDynamic(t.userInfo.profile,t.userInfo.profile.eventCount)}}},[r("span",{staticClass:"count"},[t._v(t._s(t.userInfo.profile.eventCount))]),r("span",[t._v("动态")])]),r("div",{staticClass:"content_list",on:{click:function(s){return t.showFollowModal(!0,t.userInfo.profile.follows)}}},[r("span",{staticClass:"count"},[t._v(t._s(t.userInfo.profile.follows))]),r("span",[t._v("关注")])]),r("div",{staticClass:"content_list",on:{click:function(s){return t.showFollowModal(!1,t.userInfo.profile.followeds)}}},[r("span",{staticClass:"count"},[t._v(t._s(t.userInfo.profile.followeds))]),r("span",[t._v("粉丝")])])]),r("div",{staticClass:"r_bottom"},[r("span",[t._v("所在地区："+t._s(t.userInfo.profile.city))]),r("span",[t._v(" 社交网络： "),t._l(t.userInfo.bindings,(function(s){return r("span",{directives:[{name:"show",rawName:"v-show",value:""!==s.url,expression:"item.url !== ''"}],key:s.id},[r("a",{attrs:{target:"_blank",href:s.url}},[t._v(t._s(1===s.type?"不知道":2===s.type?"微博":"不知道"))])])}))],2),r("span",[t._v("个人介绍："+t._s(t.userInfo.profile.signature?t.userInfo.profile.signature:"无"))])])])]),r("div",{staticClass:"playlist-container"},[r("h2",{directives:[{name:"show",rawName:"v-show",value:t.userId===Number(t.$route.query.userId),expression:"userId === Number($route.query.userId)"}]},[t._v("我创建的歌单")]),r("h2",{directives:[{name:"show",rawName:"v-show",value:t.userId!==Number(t.$route.query.userId),expression:"userId !== Number($route.query.userId)"}]},[t._v("歌单")]),r("div",{staticClass:"content"},[t.userInfo.peopleCanSeeMyPlayRecord?r("div",{staticClass:"list"},[r("img",{attrs:{src:e("40be"),alt:""},on:{click:t.toRecord}}),t.userId===Number(t.$route.query.userId)?r("h3",[t._v("我的听歌排行")]):t._e(),t.userId!==Number(t.$route.query.userId)?r("h3",[t._v(t._s(t.userInfo.profile.nickname)+"的听歌排行")]):t._e(),r("p",{staticClass:"allCount"},[t._v("累计播放"+t._s(t.userInfo.listenSongs)+"首")])]):t._e(),t._l(t.playList,(function(s){return r("div",{directives:[{name:"show",rawName:"v-show",value:s.creator.userId===Number(t.$route.query.userId),expression:"item.creator.userId === Number($route.query.userId)"}],key:s.id,staticClass:"list"},[r("img",{attrs:{src:s.coverImgUrl,alt:""},on:{click:function(e){return t.toPlayList(s)}}}),r("h3",[t._v(t._s(s.name))]),r("span",{staticClass:"posi_count"},[r("a-icon",{attrs:{type:"caret-right"}}),t._v(" "+t._s(t._f("countFilter")(s.playCount))+" ")],1),r("p",{staticClass:"allCount"},[t._v("共"+t._s(s.trackCount)+"首")])])}))],2),r("h2",{directives:[{name:"show",rawName:"v-show",value:t.userId===Number(t.$route.query.userId),expression:"userId === Number($route.query.userId)"}]},[t._v("我收藏的歌单")]),r("h2",{directives:[{name:"show",rawName:"v-show",value:t.userId!==Number(t.$route.query.userId),expression:"userId !== Number($route.query.userId)"}]},[t._v("收藏")]),r("div",{staticClass:"content"},t._l(t.playList,(function(s){return r("div",{directives:[{name:"show",rawName:"v-show",value:s.creator.userId!==Number(t.$route.query.userId),expression:"item.creator.userId !== Number($route.query.userId)"}],key:s.id,staticClass:"list"},[r("img",{attrs:{src:s.coverImgUrl,alt:""},on:{click:function(e){return t.toPlayList(s)}}}),r("h3",[t._v(t._s(s.name))]),r("span",{staticClass:"posi_count"},[r("a-icon",{attrs:{type:"caret-right"}}),t._v(" "+t._s(t._f("countFilter")(s.playCount))+" ")],1),r("p",{staticClass:"allCount"},[t._v("共"+t._s(s.trackCount)+"首")])])})),0)]),r("div",{ref:"bbox"},[r("a-modal",{attrs:{"get-container":function(){return t.$refs.bbox},title:"列表",width:"800px"},model:{value:t.followModal,callback:function(s){t.followModal=s},expression:"followModal"}},[0===t.allList.length?r("div",{staticClass:"example_modal"},[r("a-spin",{attrs:{tip:"获取中...",size:"large"}})],1):t._e(),r("div",{staticClass:"modal-content"},t._l(t.allList,(function(s){return r("div",{key:s.id,staticClass:"list"},[r("div",{staticClass:"left"},[r("img",{staticStyle:{cursor:"pointer"},attrs:{src:s.avatarUrl,alt:"头像"},on:{click:function(e){return t.toUserDatails(s)}}}),r("div",[r("div",[r("span",{staticStyle:{cursor:"pointer","margin-right":"10px"},on:{click:function(e){return t.toUserDatails(s)}}},[t._v(t._s(s.nickname))]),11===s.vipType?r("span",{staticClass:"vip"},[t._v("VIP")]):t._e()]),r("p",[r("span",{staticStyle:{"border-right":"2px solid silver","padding-right":"15px"}},[t._v("歌单："+t._s(s.playlistCount))]),r("span",{staticStyle:{"padding-left":"15px"}},[t._v("粉丝： "+t._s(s.followeds))])])])]),r("div",[s.userId!==t.userId?r("a-button",{on:{click:function(e){return t.directMessage(s)}}},[t._v("私信")]):t._e()],1)])})),0),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("a-button",{on:{click:function(s){t.followModal=!1}}},[t._v("确定")])],1)])],1),r("div",{ref:"draw"},[r("a-drawer",{attrs:{"get-container":function(){return t.$refs.draw},title:"与"+t.drawerName+"聊天",placement:"right",visible:t.visible,width:"500"},on:{close:t.onClose}},[r("div",{staticClass:"drawer-content"},[t._l(t.msgData,(function(s){return r("div",{key:s.id,staticClass:"drawer_list"},[r("span",{staticClass:"time"},[t._v(t._s(t._f("dateFormatIn")(s.time)))]),r("div",{staticClass:"list_content"},[s.fromId!==t.userId?r("div",{staticClass:"list_l"},[r("img",{attrs:{src:s.fromAvatar,alt:""}}),r("span",{staticClass:"text"},[t._v(t._s(s.msg.msg))])]):r("div",{staticClass:"list_r"},[t._v(" "+t._s(s.msg.msg)+" ")])])])})),0===t.msgData.length?r("div",{staticClass:"noMessage"},[r("span",[t._v(" 当前还没有聊天数据! ")])]):t._e(),r("div",{staticClass:"drawer_bottom"},[r("a-input",{attrs:{placeholder:"输入聊天内容",type:"textarea"},model:{value:t.sendData.msg,callback:function(s){t.$set(t.sendData,"msg",s)},expression:"sendData.msg"}}),r("a-button",{attrs:{loading:t.loading},on:{click:t.sendChange}},[t._v("发送")])],1)],2)])],1),r("a-modal",{attrs:{title:"提示"},model:{value:t.stopFollow,callback:function(s){t.stopFollow=s},expression:"stopFollow"}},[r("span",[t._v("确定要取消关注该用户吗？")]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("a-button",{on:{click:t.stopChange}},[t._v("确定")])],1)])],1)])},a=[],i=(e("8601"),e("85a2"),e("15a9")),o=e("fab2"),n=e("e26e"),l=e("b775");function u(t){return Object(l["a"])({url:"/msg/private/history",method:"GET",params:{uid:t}})}function c(t){return Object(l["a"])({url:"/send/text",method:"POST",params:t})}var d=e("7736"),f={name:"MyDetail",data:function(){return{followModal:!1,stopFollow:!1,isFollowed:!1,isSpin:!1,loading:!1,visible:!1,listenSongs:"",drawerName:"",messageUserId:"",userInfoData:{},sendData:{user_ids:"",msg:""},userInfo:{profile:{gender:1},listenSongs:{}},followData:{id:"",t:void 0},playList:[],allList:[],msgData:[]}},computed:Object(i["a"])({},Object(d["c"])(["userId"])),watch:{$route:"routeChange"},created:function(){this.getUserDetail(this.$route.query.userId)},methods:{getUserDetail:function(t){var s=this;this.isSpin=!0,Object(o["c"])(t).then((function(e){s.userInfo=e,s.isFollowed=e.profile.followed,s.getUserPlayList(t),s.playList=[],s.isSpin=!1})).catch((function(){s.isSpin=!1}))},routeChange:function(){this.getUserDetail(this.$route.query.userId)},getUserPlayList:function(t){var s=this;Object(n["a"])(t).then((function(t){s.playList=t.playlist}))},toDynamic:function(t,s){0!==s?this.$router.push({path:"/Dynamic",query:{id:t.userId,nickName:t.nickname}}):this.$message.info("无数据")},showFollowModal:function(t,s){this.allList=[],!0===t&&0!==s?(this.getUserFollowsList(),this.followModal=!0):!1===t&&0!==s?(this.getUserFansList(),this.followModal=!0):this.$message.info("无数据")},getPrivateMsgDetail:function(t){var s=this;this.msgData=[],u(t).then((function(t){var e=t.msgs,r=[];e.forEach((function(t){r.push({time:t.time,msg:JSON.parse(t.msg),fromId:t.fromUser.userId,fromAvatar:t.fromUser.avatarUrl})})),s.msgData=r}))},sendChange:function(){var t=this;""!==this.sendData.msg?(this.loading=!0,this.sendData.user_ids=this.messageUserId,c(this.sendData).then((function(s){t.$message.success("发送成功"),t.sendData.msg="",t.loading=!1;var e=s.newMsgs,r=[];e.forEach((function(t){r.push({time:t.time,msg:JSON.parse(t.msg),fromId:t.fromUser.userId,fromAvatar:t.fromUser.avatarUrl})})),t.msgData=r})).catch((function(){t.loading=!1}))):this.$message.error("请输入内容")},directMessage:function(t){this.messageUserId=t.userId,this.drawerName=t.nickname,this.getPrivateMsgDetail(t.userId),this.visible=!0},onClose:function(){this.visible=!1},getUserFollowsList:function(){var t=this;Object(o["e"])(this.$route.query.userId).then((function(s){t.allList=s.follow}))},getUserFansList:function(){var t=this;Object(o["d"])(this.$route.query.userId).then((function(s){t.allList=s.followeds}))},followUser:function(t,s){var e=this;0===t?this.stopFollow=!0:(this.followData.t=t,this.followData.id=s,Object(o["a"])(this.followData).then((function(t){e.isFollowed=!0,e.$message.success("已关注")})))},stopChange:function(){var t=this;this.followData.t=0,this.followData.id=this.$route.query.userId,Object(o["a"])(this.followData).then((function(s){t.stopFollow=!1,t.isFollowed=!1,t.$message.success("已取消关注")}))},toRecord:function(){this.$router.push({path:"/Record",query:{uid:this.$route.query.userId}})},toPlayList:function(t){this.$router.push({name:"RankList",query:{id:t.id}})},toUserDatails:function(t){this.$router.push({path:"/UserDetails",query:{userId:t.userId}}),this.followModal=!1,this.getUserDetail(t.userId)}}},v=f,p=(e("4c3d"),e("5d22")),m=Object(p["a"])(v,r,a,!1,null,null,null);s["default"]=m.exports}}]);