(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74a64ddc"],{"029e":function(t,e,n){},"9a54":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"PlayMvDetails-container"}},[n("div",{staticClass:"base_l"},[n("span",{staticClass:"title"},[t._v(t._s(t.mvData.name))]),n("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.toSingerDetail(t.mvData)}}},[t._v(t._s(t.mvData.artistName))]),n("div",{staticClass:"mv_video"},[n("video",{ref:"video",attrs:{src:t.MvUrl,controls:""}}),n("div",{staticClass:"video_btn"},[n("a-button",[n("a-icon",{attrs:{type:"like"}}),t._v(" 赞(无) ")],1),t.subMvList.includes(String(t.mvData.id))?n("a-button",{on:{click:function(e){return t.subMvClick(t.mvData,0)}}},[n("a-icon",{attrs:{type:"folder-add"}}),t._v(" 已收藏("+t._s(t.mvData.subCount?t.mvData.subCount:"0")+") ")],1):n("a-button",{on:{click:function(e){return t.subMvClick(t.mvData,1)}}},[n("a-icon",{attrs:{type:"folder-add"}}),t._v(" 收藏("+t._s(t.mvData.subCount?t.mvData.subCount:"0")+") ")],1),n("a-button",[n("a-icon",{attrs:{type:"share-alt"}}),t._v(" 分享("+t._s(t.mvData.shareCount?t.mvData.shareCount:"0")+") ")],1),n("a-button",[n("a-icon",{attrs:{type:"download"}}),t._v(" 下载MV ")],1)],1)]),n("div",{staticClass:"comment_content"},[n("div",{staticClass:"publish_content"},[n("p",[t._v("评论(已有"+t._s(t.total)+"条评论)")]),n("a-textarea",{attrs:{placeholder:"输入评论内容...","auto-size":{minRows:2,maxRows:6}},model:{value:t.rightCommentData.content,callback:function(e){t.$set(t.rightCommentData,"content",e)},expression:"rightCommentData.content"}}),n("a-button",{staticStyle:{width:"100px","margin-top":"10px"},attrs:{type:"primary"},on:{click:t.rightComment}},[t._v(" 发表 ")])],1),t.hotComment.length>0?n("p",{staticClass:"title"},[t._v("精彩评论")]):t._e(),t._l(t.hotComment,(function(e){return n("div",{key:e.id,staticClass:"comment_list"},[n("img",{attrs:{src:e.user.avatarUrl,alt:"加载失败"}}),n("div",{staticClass:"comment_text"},[n("div",[n("span",{staticStyle:{cursor:"pointer",color:"cornflowerblue"},attrs:{title:"查看用户"},on:{click:function(n){return t.toUserDetail(e)}}},[t._v(t._s(e.user.nickname)+"：")]),n("span",[t._v(t._s(e.content))])]),n("div",{staticClass:"text_bottom"},[n("span",[t._v(t._s(t._f("dateFormatIn")(e.time)))]),n("div",{staticClass:"bottom_btn"},[e.user.userId===t.userId?n("span",{on:{click:function(n){return t.showDelComment(e)}}},[t._v("删除")]):t._e(),n("span",{staticClass:"like",class:[!0===e.liked?"red":""],attrs:{title:!0===e.liked?"取消点赞":"点赞"},on:{click:function(n){return t.likeMusicComment(e)}}},[n("a-icon",{attrs:{type:"like"}}),t._v(" "+t._s(e.likedCount))],1),n("span",{on:{click:function(n){return t.showCommentModal(e)}}},[t._v("评论")]),n("span",[t._v("分享")])])])])])})),t.hotComment.length>0?n("hr"):t._e(),t.allComment.length>0?n("p",{staticClass:"title"},[t._v("最新评论")]):t._e(),t._l(t.allComment,(function(e){return n("div",{key:e.id,staticClass:"comment_list"},[n("img",{attrs:{src:e.user.avatarUrl,alt:"加载失败"}}),n("div",{staticClass:"comment_text"},[n("div",[n("span",{staticStyle:{cursor:"pointer",color:"cornflowerblue"},attrs:{title:"查看用户"},on:{click:function(n){return t.toUserDetail(e)}}},[t._v(t._s(e.user.nickname)+"：")]),n("span",[t._v(t._s(e.content))])]),n("div",{staticClass:"text_bottom"},[n("span",[t._v(t._s(t._f("dateFormatIn")(e.time)))]),n("div",{staticClass:"bottom_btn"},[e.user.userId===t.userId?n("span",{on:{click:function(n){return t.showDelComment(e)}}},[t._v("删除")]):t._e(),n("span",{staticClass:"like",class:[!0===e.liked?"red":""],attrs:{title:!0===e.liked?"取消点赞":"点赞"},on:{click:function(n){return t.likeMusicComment(e)}}},[n("a-icon",{attrs:{type:"like"}}),t._v(" "+t._s(e.likedCount)+" ")],1),n("span",{on:{click:function(n){return t.showCommentModal(e)}}},[t._v("评论")]),n("span",[t._v("分享")])])])])])}))],2)]),n("div",{staticClass:"base_r"},[t._m(0),n("div",{staticClass:"mv_content"},[n("span",[t._v("发布时间："+t._s(t.mvData.publishTime?t.mvData.publishTime:"2000-01-01"))]),n("span",[t._v("播放次数："+t._s(t.mvData.playCount?t.mvData.playCount:"0")+"次")])]),n("div",{staticClass:"mv_desc"},[n("span",[t._v("简介："+t._s(t.mvData.desc?t.mvData.desc:"无"))])]),t._m(1),n("div",{ref:"bbox"},[n("a-modal",{attrs:{"mask-closable":!1,closable:!1,"get-container":function(){return t.$refs.bbox},title:"评论",width:"600px"},model:{value:t.commentModal,callback:function(e){t.commentModal=e},expression:"commentModal"}},[n("div",{staticClass:"toComment"},[n("p",[t._v("回复："+t._s(t.commentUser))]),n("p",{staticClass:"text"},[t._v(t._s(t.commentText))])]),n("a-input",{attrs:{type:"textarea",placeholder:"输入评论内容"},model:{value:t.rightCommentData.content,callback:function(e){t.$set(t.rightCommentData,"content",e)},expression:"rightCommentData.content"}}),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("a-button",{on:{click:t.commentChange}},[t._v("确定")]),n("a-button",{on:{click:function(e){t.commentModal=!1}}},[t._v("取消")])],1)],1)],1)]),n("a-modal",{attrs:{title:"提示"},model:{value:t.delModal,callback:function(e){t.delModal=e},expression:"delModal"}},[n("span",[t._v("确定要删除吗？")]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("a-button",{attrs:{type:"danger",loading:t.loading},on:{click:t.delCommentChange}},[t._v("确定")]),n("a-button",{on:{click:function(e){t.delModal=!1}}},[t._v("取消")])],1)])],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"r_header"},[n("span",[t._v("MV介绍")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"r_header"},[n("span",[t._v("相关推荐")])])}],i=(n("8601"),n("85a2"),n("15a9")),o=n("d922"),c=n("cc49"),r=n("7736"),m={name:"MvDetails",data:function(){return{commentModal:!1,delModal:!1,loading:!1,playData:{r:"1080",id:""},delData:{t:0,type:1,id:"",commentId:""},comment:{id:"",limit:"20"},rightCommentData:{t:1,type:1,id:"",content:"",commentId:""},subData:{mvid:"",t:void 0},allComment:[],hotComment:[],subMvList:[],commentText:"",commentUser:"",total:"",MvUrl:"",mvData:{}}},created:function(){this.getMvUrl(),this.getMvData(),this.getMvCommentList(),this.getSubMvList()},computed:Object(i["a"])({},Object(r["c"])(["userId"])),methods:Object(i["a"])(Object(i["a"])({},Object(r["b"])(["playBtnAction"])),{},{getMvUrl:function(){var t=this;this.playData.id=this.$route.query["id"],Object(o["c"])(this.playData).then((function(e){t.MvUrl=e.data.url}))},getMvData:function(){var t=this;Object(o["b"])(this.$route.query["id"]).then((function(e){t.mvData=e.data}))},rightComment:function(){var t=this;this.rightCommentData.t=1,this.rightCommentData.id=this.$route.query.id,this.rightCommentData.commentId="",Object(c["d"])(this.rightCommentData).then((function(e){t.$message.success("评论成功"),t.rightCommentData.content="",t.getMusicCommentList(t.$route.query.id)}))},getSubMvList:function(){var t=this;Object(o["e"])().then((function(e){var n=e.data,a=[];n.forEach((function(t){a.push(t.vid)})),t.subMvList=a}))},subMvClick:function(t,e){var n=this;this.subData.mvid=t.id,0===e?(this.subData.t=0,Object(o["f"])(this.subData).then((function(t){n.$message.success("已取消收藏")}))):(this.subData.t=1,Object(o["f"])(this.subData).then((function(t){n.$message.success("已收藏")})))},getMvCommentList:function(){var t=this;this.comment.id=this.$route.query["id"],Object(c["b"])(this.comment).then((function(e){t.total=e.total,t.hotComment=e.hotComments,t.allComment=e.comments}))},showCommentModal:function(t){this.commentText=t.content,this.commentUser=t.user.nickname,this.rightCommentData.id=this.$route.query.id,this.rightCommentData.commentId=t.commentId,this.commentModal=!0},commentChange:function(){var t=this;this.rightCommentData.t=2,""!==this.rightCommentData.content?Object(c["d"])(this.rightCommentData).then((function(e){t.commentModal=!1,t.$message.success("评论成功"),t.rightCommentData.content="",t.getMusicCommentList(t.$route.query.id)})):this.$message.warning("未输入内容！")},showDelComment:function(t){this.delData.commentId=t.commentId,this.delModal=!0},delCommentChange:function(){var t=this;this.loading=!0,this.delData.id=this.$route.query.id,Object(c["d"])(this.delData).then((function(e){t.delModal=!1,t.loading=!1,t.$message.success("已删除"),t.getMusicCommentList(t.$route.query.id)})).catch((function(){t.loading=!1}))},toSingerDetail:function(t){this.$router.push({name:"SingerDetails",query:{id:t.artistId}})},toUserDetail:function(t){this.$router.push({path:"/UserDetails",query:{userId:t.user.userId}})},likeMusicComment:function(){this.$message.error("待完善")}})},u=m,l=(n("ab36"),n("5d22")),d=Object(l["a"])(u,a,s,!1,null,null,null);e["default"]=d.exports},ab36:function(t,e,n){"use strict";n("029e")},cc49:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return c}));var a=n("b775");function s(t){return Object(a["a"])({url:"/comment/music",method:"GET",params:t})}function i(t){return Object(a["a"])({url:"/comment",method:"GET",params:t})}function o(t){return Object(a["a"])({url:"/comment/like",method:"GET",params:t})}function c(t){return Object(a["a"])({url:"/comment/mv",method:"GET",params:t})}},d922:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return m}));var a=n("b775");function s(t){return Object(a["a"])({url:"/mv/url",method:"GET",params:t})}function i(t){return Object(a["a"])({url:"/mv/detail",method:"GET",params:{mvid:t}})}function o(){return Object(a["a"])({url:"/personalized/mv",method:"GET"})}function c(t){return Object(a["a"])({url:"/mv/first",method:"GET",params:t})}function r(){return Object(a["a"])({url:"/mv/sublist",method:"GET"})}function m(t){return Object(a["a"])({url:"/mv/sub",method:"POST",params:t})}}}]);